process(state_reg, cuenta_reg, reset, fst_cycle_reg )
begin
state_next <= state_reg;
    case state_reg is
        when idle =>
            if(reset = '0') then
                if ((0 <= cuenta_next and cuenta_next <= 105) or (150 <= cuenta_next and cuenta_next <= 255)) then
                    state_next <= data1;
                 elsif (106 <= cuenta_next  and cuenta_next <= 149) then
                    state_next <= data2;
                 elsif (cuenta_reg = 299) then
                        state_next <= new_cycle;
                 else 
                        state_next <= cuenta_sum;
                end if;
            end if;
        when data2 =>
            state_next <= idle;
        when new_cycle =>
            state_next <= ready_dato1;
        when  cuenta_sum =>
            state_next <= ready_dato1;
         when ready_dato1 => 
            if (cuenta_reg = 256) then
                state_next <= reg_dato1;
            else
                state_next <= not_ready;
             end if;
        when others =>
            state_next <= idle;
        end case;      
end process;
